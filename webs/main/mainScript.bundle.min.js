/* INDEX js */
function isJsonString(n){try{JSON.parse(n)}catch(n){return!1}return!0}$(document).ready(function(){socketInit(),colorInit()});
/* INDEX js */

/* color picker js */
function colorInit(){makePicker()}var RGB_Strip;function makePicker(){(RGB_Strip=new iro.ColorPicker(".colorPicker",{color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff",id:"MainPicker",layout:[{component:iro.ui.Box},{component:iro.ui.Slider,options:{id:"hue-slider",sliderType:"hue"}},{component:iro.ui.Slider,options:{id:"saturation-slider",sliderType:"saturation"}},{component:iro.ui.Slider,options:{id:"value-slider",sliderType:"value"}},{component:iro.ui.Slider,options:{id:"kelvin-slider",sliderType:"kelvin"}}]})).on("input:move",getColorFromEvent),RGB_Strip.on("input:end",getColorFromEvent)}function getColorFromEvent(){sendPacket({type:"rgb",r:RGB_Strip.color.rgb.r,g:RGB_Strip.color.rgb.g,b:RGB_Strip.color.rgb.b})}
/* color picker js */

/* websocket js */
var socket,socketIsConnected=!1,socketConnectionCount=0,socketIsConnecting=!1;function socketInit(){connectWebsocket(),checkSocketConnection()}function checkSocketConnection(){setInterval(()=>{socketIsConnected||(socketConnectionCount<3?(socketConnectionCount++,connectWebsocket()):socketConnectionCount>=3&&!socketIsConnected&&!socketIsConnecting&&setTimeout(()=>{socketConnectionCount=0},1e4))},1e3)}function connectWebsocket(){socket=new WebSocket("ws://"+window.location.hostname+"/moodLamp"),socketIsConnecting=!0,socket.onopen=function(o){console.log("Socket connected"),socketIsConnected=!0,socketIsConnecting=!1},socket.onclose=function(o){console.log("Socket closed"),socketIsConnected=!1,socketIsConnecting=!1},socket.onmessage=function(o){processSocketData(o.data)}}function processSocketData(o){let e={type:"Not json",content:o};switch(isJsonString(o)&&(e=JSON.parse(o)),e.type){case"message":console.log(e.content);break;default:console.log("Unknown packet type: "+e.type,"content: ",e.content)}}function sendPacket(o){if(socketIsConnected){let e=JSON.stringify(o);socket.send(e)}else console.log("Socket is not connected")}
/* websocket js */
